@using m4d.ViewModels
@using Microsoft.AspNetCore.Mvc.Rendering
@using Vite.AspNetCore.Abstractions
@inject IViteManifest Manifest;

@{
    var help = "https://music4dance.blog/music4dance-help/";
    if (!string.IsNullOrEmpty(ViewBag.Help))
    {
        help = string.Format("https://music4dance.blog/music4dance-help/{0}/", ViewBag.Help);
    }
    ViewData["NoSiteCss"] = true;
}
<!DOCTYPE html>
@{
}
<html>
<head>
    @{ string header = "header";}
    @await RenderSectionAsync("styles", false)
    <environment include="Production">
        <partial name="_vue-css" model="header"/>
    </environment>
    <partial name="_head"/>
    @* INT-TODO: Move this to a style sheet? *@
    <style>
        .list-clean {
            list-style-type: none;
        }

        .list-clean-aligned {
            list-style-type: none;
            margin-left: -2em;
        }
    </style>
</head>

<body>
    <div id="app"></div>

@if (ViewBag.BreadCrumbs != null)
{
    List<BreadCrumbItem> breadCrumbs = ViewBag.BreadCrumbs;
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb" style="padding: .25rem .5rem">
            @foreach (var item in breadCrumbs)
            {
                if (item.Active.HasValue && item.Active.Value)
                {
                    <li class="breadcrumb-item active" aria-current="page">@item.Title</li>
                }
                else
                {
                    <li class="breadcrumb-item">
                        <a href="@item.Link">@item.Title</a>
                    </li>
                }
            }
        </ol>
    </nav>
}

<div id="body-content" class="container-fluid body-content">
    @RenderBody()
</div>

<div id="footer-content">
    <hr/>
    <footer>
        <p>
            &copy; @DateTime.Now.Year - Music4Dance.net -
            @Html.ActionLink("Site Map", "sitemap", "Home") -
            @Html.ActionLink("Terms of Service", "termsofservice", "Home") -
            @Html.ActionLink("Privacy Policy", "privacypolicy", "Home") -
            @Html.ActionLink("Credits", "credits", "Home") -
            <a href="@help">Help</a>
        </p>
    </footer>
</div>

@* INT-TODO: Should probably copy the bootstrap js locally and do fallback stuff *@
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

<environment include="Development">
    <script type="module" src="/src/pages/header/main.ts"></script>
</environment>

<environment include="Production">
    <script type="module" src="/@Manifest["vclient/src/pages/header/main.ts"]!.File"></script>
</environment>

@await RenderSectionAsync("scripts", false)
</body>
</html>
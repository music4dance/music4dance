@using System.Runtime.Serialization.Json
@model SongDetails

@{
    if (ViewData.ContainsKey("paramNumerator"))
    {
        <script> var paramNumerator = @ViewBag.paramNumerator; </script>
    }
    var stream = new MemoryStream();
    var serializer = new DataContractJsonSerializer(typeof (SongDetails));
    serializer.WriteObject(stream, Model);
    var songString = System.Text.Encoding.UTF8.GetString(stream.ToArray());
    var canEdit = User.IsInRole("canEdit") ? "true" : "false";
}

<script>
    var paramShowMPM = true;
    var paramShowBPM = true;
    var paramEpsVisible = 0.1;
    var canEdit = @canEdit;
    var song = @Html.Raw(songString);
</script>

